'use strict';define("metaphorjs-animate",["metaphorjs-promise"],function(E){function r(a,c){c&&(a.className=a.className.replace(I("(?:^|\\s)"+c+"(?!\\S)"),""))}function B(a){return"function"==typeof a}function N(a){if(!a)return!1;var c,b;return"object"!=(b=typeof a)&&"function"!=b?!1:B(c=a.then)?c:!1}function C(a){return"object"==typeof a&&3===F(a)&&!a.nodeType&&a.constructor===Object}function J(a){return!0===a||!1===a}function K(a,c){var b;if(b=c)b=!(c&&I("(?:^|\\s)"+c+"(?!\\S)").test(a.className));
b&&(a.className+=" "+c)}function G(a){return"string"==typeof a||a===""+a}var z=function(){var a=["Moz","Webkit","ms","O","Khtml"],c="animationDelay",b="animationDuration",g="transitionDelay",f="transitionDuration",k="transform",y=null,d=null,l=!1;return function(){if(!l){var u=window.document.createElement("div"),e=!1,n,D,h;if(void 0!==u.style.animationName)e=!0;else for(D=0,h=a.length;D<h;D++)if(n=a[D],void 0!==u.style[n+"AnimationName"]){e=!0;c=n+"AnimationDelay";b=n+"AnimationDuration";g=n+"TransitionDelay";
f=n+"TransitionDuration";k=n+"Transform";break}e&&("ontransitionend"in window?y="transitionend":"onwebkittransitionend"in window&&(y="webkitTransitionEnd"));d=e?{animationDelay:c,animationDuration:b,transitionDelay:g,transitionDuration:f,transform:k,transitionend:y}:{};l=!0}return d}}(),L=function(){var a=function(a){if(!a)return 0;var c=parseFloat(a);-1==a.indexOf("ms")&&(c*=1E3);return c},c=function(c,b,u){var e,n,f=b.length;for(e=0;e<f;e++)n=a(b[e])+a(u[e]),c=Math.max(n,c);return c},b=!1,g=null,
f=null,k=null,h=null;return function(a){!1===b&&(g=(b=z())?b.animationDuration:null,f=b?b.animationDelay:null,k=b?b.transitionDuration:null,h=b?b.transitionDelay:null);if(!b)return 0;var l=window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var u=(l[g]||"").split(","),e=(l[f]||"").split(","),n=(l[k]||"").split(","),l=(l[h]||"").split(",");a=Math.max(a,c(a,u,e));return a=Math.max(a,c(a,n,l))}}(),O=function(){var a=["0","0","0"];return function(){for(var c=a.length,b;c;){c--;b=a[c].charCodeAt(0);
if(57==b)return a[c]="A",a.join("");if(90==b)a[c]="0";else return a[c]=String.fromCharCode(b+1),a.join("")}a.unshift("0");return a.join("")}}(),h=function(){var a={};return function(c,b,g){c=c._mjsid||(c._mjsid=O());var f=a[c];return void 0!==g?(f||(f=a[c]={}),f[b]=g):f?f[b]:void 0}}(),I=function(){var a={};return function(c){return a[c]||(a[c]=new RegExp(c))}}(),P=Object.prototype.toString,F=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,
"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(c){if(!c){if(null===c)return 6;if(void 0===c)return 7}var b=a[P.call(c)];return void 0===b?-1:1==b&&isNaN(c)?8:b}}(),Q=function(a){var c=h(a,"mjsAnimationQueue"),b,g;if("object"==typeof c&&5===F(c)&&c.length){if(c=c[0])c.stages&&(b=c.position,g=c.stages,r(a,g[b]),r(a,g[b]+"-active")),c.deferred&&c.deferred.reject(c.el)}else B(c)?c(a):"stop"==c&&$(a).stop(!0,!0);h(a,"mjsAnimationQueue",null)},R=Array.prototype.slice,M=function(){return function c(){var b=
!1,g=!1,f=R.call(arguments),k=f.shift(),h,d,l;J(f[f.length-1])&&(b=f.pop());J(f[f.length-1])&&(g=b,b=f.pop());for(;f.length;)if(h=f.shift())for(d in h)if(h.hasOwnProperty(d)&&void 0!==(l=h[d]))if(g)if(k[d]&&C(k[d])&&C(l))c(k[d],l,b,g);else{if(!0===b||void 0==k[d])C(l)?(k[d]={},c(k[d],l,b,!0)):k[d]=l}else if(!0===b||void 0==k[d])k[d]=l;return k}}(),v=function(){var a,c;if("undefined"!=typeof window){var b=window;a=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame;c=
b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame;if(a)return function(b){var f=a(b);return function(){c(f)}}}return function(a){var c=setTimeout(a,0);return function(){clearTimeout(c)}}}();return function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},c=0,b=!1,g=!1,f=function(a,c,e){var b=function(){(new Date).getTime()-c>=e?a():v(b)};v(b)},k=function(){!1===b&&(b=z(),g=!!b);
return g},y=function u(a,c,b,d,g,k,A,w){var x=function(){var c=h(a,"mjsAnimationQueue");return c&&c.length&&c[0].id==A?!1:(g.reject(a),!0)},q=function(){if(!x()){var f=b;b++;if(b==c.length){g.resolve(a);h(a,"mjsAnimationQueue").shift();var d=h(a,"mjsAnimationQueue");d.length?(d=d[0],y(d.el,d.stages,0,d.start,d.deferred,!1,d.id,d.step)):h(a,"mjsAnimationQueue",null)}else h(a,"mjsAnimationQueue")[0].position=b,u(a,c,b,null,g,!1,A,w);r(a,c[f]);r(a,c[f]+"-active")}},m=function(){x()||(K(a,c[b]+"-active"),
E.resolve(w&&w(a,b,"active")).done(function(){if(!x()){var c=L(a);c?f(q,(new Date).getTime(),c):v(q)}}))},t=function(){x()||(K(a,c[b]),E.waterfall([w&&w(a,b,"start"),function(){return d?d(a):null}]).done(function(){!x()&&v(m)}))};k?v(t):t()},d=function(b,e,d,f,g,v){var p=new E,A=h(b,"mjsAnimationQueue")||[],w=++c,x=b.getAttribute?b.getAttribute("mjs-animate"):null,q,m,t,r,s,z,H;e=e||x;f&&null===x&&(e=null);if(e){G(e)?"["==e.substr(0,1)?q=(new Function("","return "+e))():(q=a[e],e=g&&g.get("animate."+
e,!0)):B(e)?m=e:"object"==typeof e&&5===F(e)&&(G(e[0])?q=e:(t=e[0],r=e[1]));C(e)&&(q=e.stages,m=e.fn,t=e.before,r=e.after,s=e.options?M({},e.options):{},z=e.context||null,H=e.duration||null,d=d||s.start);if(k()&&q)return A.push({el:b,stages:q,start:d,step:v,deferred:p,position:0,id:w}),h(b,"mjsAnimationQueue",A),1==A.length&&y(b,q,0,d,p,!0,w,v),p;s=s||{};d&&(s.start=function(){d(b)});s.complete=function(){p.resolve(b)};H&&(s.duration=H);if(m&&B(m))return t&&M(b.style,t,!0,!1),d&&d(b),h(b,"mjsAnimationQueue",
m.call(z,b,function(){p.resolve(b)})),p;if(window.jQuery){e=$(b);t&&e.css(t);h(b,"mjsAnimationQueue","stop");if(m&&G(m))return e[m](s),p;if(r)return e.animate(r,s),p}}d?(m=d(b),N(m)?m.done(function(){p.resolve(b)}):p.resolve(b)):p.resolve(b);return p};d.addAnimationType=function(b,c){a[b]=c};d.stop=Q;d.getPrefixes=z;d.getDuration=L;d.cssAnimationSupported=k;return d}()});
