define("metaphorjs-animate",["metaphorjs-promise"],function(E){var z=function(){var a=["Moz","Webkit","ms","O","Khtml"],c="animationDelay",b="animationDuration",f="transitionDelay",d="transitionDuration",h="transform",g=null;(function(){var l=document.createElement("div"),k=!1,e,m,g;if(void 0!==l.style.animationName)k=!0;else for(m=0,g=a.length;m<g;m++)if(e=a[m],void 0!==l.style[e+"AnimationName"]){k=!0;c=e+"AnimationDelay";b=e+"AnimationDuration";f=e+"TransitionDelay";d=e+"TransitionDuration";h=
e+"Transform";break}return k})()&&(g={animationDelay:c,animationDuration:b,transitionDelay:f,transitionDuration:d,transform:h});return function(){return g}}(),N=function(){var a=function(a){if(!a)return 0;var c=parseFloat(a);-1==a.indexOf("ms")&&(c*=1E3);return c},c=function(c,b,e){var m,d,f=b.length;for(m=0;m<f;m++)d=a(b[m])+a(e[m]),c=Math.max(d,c);return c},b=z(),f=b?b.animationDuration:null,d=b?b.animationDelay:null,h=b?b.transitionDuration:null,g=b?b.transitionDelay:null;return function(a){if(!b)return 0;
var k=window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var e=(k[f]||"").split(","),m=(k[d]||"").split(","),M=(k[h]||"").split(","),k=(k[g]||"").split(",");a=Math.max(a,c(a,e,m));return a=Math.max(a,c(a,M,k))}}(),O=function(){var a=["0","0","0"];return function(){for(var c=a.length,b;c;){c--;b=a[c].charCodeAt(0);if(57==b)return a[c]="A",a.join("");if(90==b)a[c]="0";else return a[c]=String.fromCharCode(b+1),a.join("")}a.unshift("0");return a.join("")}}(),q=function(){var a={};return function(c,
b,f){c=c._mjsid||(c._mjsid=O());var d=a[c];return void 0!==f?(d||(d=a[c]={}),d[b]=f):d?d[b]:void 0}}(),H=function(){var a={};return function(c){return a[c]||(a[c]=new RegExp(c))}}(),x=function(a,c){c&&(a.className=a.className.replace(H("(?:^|\\s)"+c+"(?!\\S)"),""))},A=function(a){return"function"==typeof a},P=Object.prototype.toString,B=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};
return function(c){if(!c){if(null===c)return 6;if(void 0===c)return 7}var b=a[P.call(c)];return void 0===b?-1:1==b&&isNaN(c)?8:b}}(),Q=function(a){var c=q(a,"mjsAnimationQueue"),b,f;if("object"==typeof c&&5===B(c)&&c.length){if(c=c[0])c.stages&&(b=c.position,f=c.stages,x(a,f[b]),x(a,f[b]+"-active")),c.deferred&&c.deferred.reject(c.el)}else A(c)?c(a):"stop"==c&&$(a).stop(!0,!0);q(a,"mjsAnimationQueue",null)},R=function(a){var c,b;(b=!a)||(null===a||"object"!=typeof a?b=!1:(b=B(a),b=2<b||-1==b),b=!b&&
!A(a));return b?!1:A(c=a.then)?c:!1},S=Array.prototype.slice,C=function(a){return"object"==typeof a&&3===B(a)&&!a.nodeType},I=function(a){return!0===a||!1===a},J=function(){return function c(){var b=!1,f=!1,d=S.call(arguments),h=d.shift(),g,l,k;I(d[d.length-1])&&(b=d.pop());I(d[d.length-1])&&(f=b,b=d.pop());for(;d.length;)if(g=d.shift())for(l in g)if(g.hasOwnProperty(l)&&void 0!==(k=g[l]))if(f)if(h[l]&&C(h[l])&&C(k))c(h[l],k,b,f);else{if(!0===b||void 0==h[l])C(k)?(h[l]={},c(h[l],k,b,!0)):h[l]=k}else if(!0===
b||void 0==h[l])h[l]=k;return h}}(),K=function(a,c){var b;if(b=c)b=!(c&&H("(?:^|\\s)"+c+"(?!\\S)").test(a.className));b&&(a.className+=" "+c)},F=function(a){return"string"==typeof a||0===B(a)},L=function(a){var c,b=a?"pageYOffset":"pageXOffset",f=a?"scrollTop":"scrollLeft";a=document;var d=a.body,h=a.documentElement;c=void 0!==window[b]?function(){return window[b]}:h.clientHeight?function(){return h[f]}:function(){return d[f]};return function(a){return a&&1==a.nodeType&&a!==d&&a!==h?a[f]:c()}};L(!0);
L(!1);var T=function(a,c,b){return a&&a.getAttribute?void 0===b?a.getAttribute(c):null===b?a.removeAttribute(c):a.setAttribute(c,b):null},u=function(){var a,c;if("undefined"!=typeof window){var b=window;a=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame;c=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame;if(a)return function(b){var d=a(b);return function(){c(d)}}}return function(a){var c=setTimeout(a,
0);return function(){clearTimeout(c)}}}();return function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},c=0,b=z(),f=!!b,d=function(a,c,b){var m=function(){(new Date).getTime()-c>=b?a():u(m)};u(m)},h=function k(a,c,b,f,g,n,y,v){var w=function(){var c=q(a,"mjsAnimationQueue");return c&&c.length&&c[0].id==y?!1:(g.reject(a),!0)},r=function(){if(!w()){var d=b;b++;if(b==c.length){g.resolve(a);q(a,"mjsAnimationQueue").shift();var f=q(a,"mjsAnimationQueue");
f.length?(f=f[0],h(f.el,f.stages,0,f.start,f.deferred,!1,f.id,f.step)):q(a,"mjsAnimationQueue",null)}else q(a,"mjsAnimationQueue")[0].position=b,k(a,c,b,null,g,!1,y,v);x(a,c[d]);x(a,c[d]+"-active")}},p=function(){w()||(K(a,c[b]+"-active"),E.resolve(v&&v(a,b,"active")).done(function(){if(!w()){var c=N(a);c?d(r,(new Date).getTime(),c):u(r)}}))},t=function(){w()||(K(a,c[b]),E.waterfall([v&&v(a,b,"start"),function(){return f?f(a):null}]).done(function(){!w()&&u(p)}))};n?u(t):t()},g=function(b,e,d,g,u,
x){var n=new E,y=q(b,"mjsAnimationQueue")||[],v=++c,w=T(b,"mjs-animate"),r,p,t,D,s,z,G;e=e||w;g&&null===w&&(e=null);if(e){F(e)?"["==e.substr(0,1)?r=(new Function("","return "+e))():(r=a[e],e=u&&u.get("animate."+e,!0)):A(e)?p=e:"object"==typeof e&&5===B(e)&&(F(e[0])?r=e:(t=e[0],D=e[1]));C(e)&&(r=e.stages,p=e.fn,t=e.before,D=e.after,s=e.options?J({},e.options):{},z=e.context||null,G=e.duration||null,d=d||s.start);if(f&&r)return y.push({el:b,stages:r,start:d,step:x,deferred:n,position:0,id:v}),q(b,"mjsAnimationQueue",
y),1==y.length&&h(b,r,0,d,n,!0,v,x),n;s=s||{};d&&(s.start=function(){d(b)});s.complete=function(){n.resolve(b)};G&&(s.duration=G);if(p&&A(p))return t&&J(b.style,t,!0,!1),d&&d(b),q(b,"mjsAnimationQueue",p.call(z,b,function(){n.resolve(b)})),n;if(window.jQuery){e=$(b);t&&e.css(t);q(b,"mjsAnimationQueue","stop");if(p&&F(p))return e[p](s),n;if(D)return e.animate(D,s),n}}d?(p=d(b),R(p)?p.done(function(){n.resolve(b)}):n.resolve(b)):n.resolve(b);return n};g.addAnimationType=function(b,c){a[b]=c};g.stop=
Q;g.prefixes=b;g.cssAnimations=f;return g}()});
