(function(){var y={lib:{},cmp:{},view:{}},A=function(){var c=["Moz","Webkit","ms","O","Khtml"],e="animationDelay",f="animationDuration",k="transitionDelay",h="transitionDuration",l="transform",g=null;(function(){var b=document.createElement("div"),a=!1,d,g,C;if(void 0!==b.style.animationName)a=!0;else for(g=0,C=c.length;g<C;g++)if(d=c[g],void 0!==b.style[d+"AnimationName"]){a=!0;e=d+"AnimationDelay";f=d+"AnimationDuration";k=d+"TransitionDelay";h=d+"TransitionDuration";l=d+"Transform";break}return a})()&&
(g={animationDelay:e,animationDuration:f,transitionDelay:k,transitionDuration:h,transform:l});return function(){return g}}(),N=function(){var c=function(b){if(!b)return 0;var a=parseFloat(b);-1==b.indexOf("ms")&&(a*=1E3);return a},e=function(b,a,d){var e,f,g=a.length;for(e=0;e<g;e++)f=c(a[e])+c(d[e]),b=Math.max(f,b);return b},f=A(),k=f?f.animationDuration:null,h=f?f.animationDelay:null,l=f?f.transitionDuration:null,g=f?f.transitionDelay:null;return function(b){if(!f)return 0;var a=window.getComputedStyle?
window.getComputedStyle(b,null):b.style;b=0;var d=(a[k]||"").split(","),c=(a[h]||"").split(","),C=(a[l]||"").split(","),a=(a[g]||"").split(",");b=Math.max(b,e(b,d,c));return b=Math.max(b,e(b,C,a))}}(),O=function(){var c=["0","0","0"];return function(){for(var e=c.length,f;e;){e--;f=c[e].charCodeAt(0);if(57==f)return c[e]="A",c.join("");if(90==f)c[e]="0";else return c[e]=String.fromCharCode(f+1),c.join("")}c.unshift("0");return c.join("")}}(),s=function(){var c={};return function(e,f,k){e=e._mjsid||
(e._mjsid=O());var h=c[e];return void 0!==k?(h||(h=c[e]={}),h[f]=k):h?h[f]:void 0}}(),H=function(){var c={};return function(e){return c[e]||(c[e]=new RegExp(e))}}(),z=function(c,e){e&&(c.className=c.className.replace(H("(?:^|\\s)"+e+"(?!\\S)"),""))},n=function(c){return"function"==typeof c},P=Object.prototype.toString,B=function(){var c={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};
return function(e){if(!e){if(null===e)return 6;if(void 0===e)return 7}var f=c[P.call(e)];return void 0===f?-1:1==f&&isNaN(e)?8:f}}(),I=function(c){var e=s(c,"mjsAnimationQueue"),f,k;if("object"==typeof e&&5===B(e)&&e.length){if(e=e[0])e.stages&&(f=e.position,k=e.stages,z(c,k[f]),z(c,k[f]+"-active")),e.deferred&&e.deferred.reject(e.el)}else n(e)?e(c):"stop"==e&&$(c).stop(!0,!0);s(c,"mjsAnimationQueue",null)},p=function(c){var e,f;(f=!c)||(null===c||"object"!=typeof c?f=!1:(f=B(c),f=2<f||-1==f),f=!f&&
!n(c));return f?!1:n(e=c.then)?e:!1},Q=Array.prototype.slice,D=function(c){return"object"==typeof c&&3===B(c)&&!c.nodeType},J=function(c){return!0===c||!1===c},K=function(){return function e(){var f=!1,k=!1,h=Q.call(arguments),l=h.shift(),g,b,a;J(h[h.length-1])&&(f=h.pop());J(h[h.length-1])&&(k=f,f=h.pop());for(;h.length;)if(g=h.shift())for(b in g)if(g.hasOwnProperty(b)&&void 0!==(a=g[b]))if(k)if(l[b]&&D(l[b])&&D(a))e(l[b],a,f,k);else{if(!0===f||void 0==l[b])D(a)?(l[b]={},e(l[b],a,f,!0)):l[b]=a}else if(!0===
f||void 0==l[b])l[b]=a;return l}}(),m=Function.prototype.bind?function(c,e){return c.bind(e)}:function(c,e){return function(){return c.apply(e,arguments)}},R=function(c,e,f){setTimeout(function(){c.apply(e,f||[])},0)},L=function(c){var e=c.stack||Error().stack;if("undefined"!=typeof console&&console.log)R(function(){console.log(c);e&&console.log(e)});else throw c;},E=function(){var c=[],e=!1,f="undefined"!=typeof process?process.nextTick:function(b){setTimeout(b,0)},k=function(){e=!0;var b=c.shift();
f(function(){b[0].apply(b[1],b[2]);c.length?k():e=!1},0)},h=function(b,a,d){d=d||[];c.push([b,a,d]);e||k()},l=function(b,a){return function(d){try{a.resolve(b(d))}catch(c){a.reject(c)}}},g=function(b,a){if(b instanceof g)return b;if(!(this instanceof g))return new g(b,a);var d;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(d=p(b))b instanceof g?b.then(m(this.resolve,this),m(this.reject,this)):(new g(d,b)).then(m(this.resolve,this),m(this.reject,this));else if(n(b))try{b.call(a,
m(this.resolve,this),m(this.reject,this))}catch(c){this.reject(c)}else this.resolve(b)};g.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(b,a){var d;if(0==this._state)if(b===
this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(d=p(b)){b instanceof g?b.then(m(this._processResolveValue,this),m(this._processRejectReason,this)):(new g(d,b)).then(m(this._processResolveValue,this),m(this._processRejectReason,this));return}}catch(c){0==this._state&&this._doReject(c);return}a.call(this,b)}},_callResolveHandlers:function(){this._done();for(var b=this._fulfills,a;a=b.shift();)h(a[0],a[1],[this._value]);this._cleanup()},_doResolve:function(b){this._value=
b;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(b){this._processValue(b,this._doResolve)},resolve:function(b){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(b);return this},_callRejectHandlers:function(){this._fail();for(var b=this._rejects,a;a=b.shift();)h(a[0],a[1],[this._reason]);this._cleanup()},_doReject:function(b){this._state=2;this._reason=b;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(b){this._processValue(b,
this._doReject)},reject:function(b){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(b);return this},then:function(b,a){var d=new g,c=this._state;0==c||0!=this._wait?(b&&n(b)?this._fulfills.push([l(b,d),null]):this._fulfills.push([d.resolve,d]),a&&n(a)?this._rejects.push([l(a,d),null]):this._rejects.push([d.reject,d])):1==c?b&&n(b)?h(l(b,d),null,[this._value]):d.resolve(this._value):2==c&&(a&&n(a)?h(l(a,d),null,[this._reason]):d.reject(this._reason));return d},"catch":function(b){return this.then(null,
b)},_done:function(){for(var b=this._dones,a;a=b.shift();)try{a[0].call(a[1]||null,this._value)}catch(d){L(d)}},done:function(b,a){var d=this._state;1==d&&0==this._wait?b.call(a||null,this._value):0==d&&this._dones.push([b,a]);return this},_fail:function(){for(var b=this._fails,a;a=b.shift();)try{a[0].call(a[1]||null,this._reason)}catch(d){L(d)}},fail:function(b,a){var d=this._state;2==d&&0==this._wait?b.call(a||null,this._reason):0==d&&this._fails.push([b,a]);return this},always:function(b,a){this.done(b,
a);this.fail(b,a);return this},promise:function(){return{then:m(this.then,this),done:m(this.done,this),fail:m(this.fail,this),always:m(this.always,this)}},after:function(b){var a=this;if(p(b)){a._wait++;var d=function(){a._wait--;0==a._wait&&0!=a._state&&(1==a._state?a._callResolveHandlers():a._callRejectHandlers())};n(b.done)?b.done(d):b.then(d)}return a}};g.fcall=function(b,a,d){return g.resolve(b.apply(a,d||[]))};g.resolve=function(b){var a=new g;a.resolve(b);return a};g.reject=function(b){var a=
new g;a.reject(b);return a};g.all=function(b){if(!b.length)return g.resolve(null);var a=new g,d=b.length,c=Array(d),e=d,f,h,k=function(b,d){c[d]=b;e--;0==e&&a.resolve(c)};for(f=0;f<d;f++)(function(d){h=b[f];h instanceof g?h.done(function(a){k(a,d)}).fail(a.reject,a):p(h)||n(h)?(new g(h)).done(function(a){k(a,d)}).fail(a.reject,a):k(h,d)})(f);return a};g.when=function(){return g.all(arguments)};g.allResolved=function(b){if(!b.length)return g.resolve(null);var a=new g,d=b.length,c=[],e=d,f,h,k=function(a){c.push(a);
l()},l=function(){e--;0==e&&a.resolve(c)};for(f=0;f<d;f++)h=b[f],h instanceof g?h.done(k).fail(l):p(h)||n(h)?(new g(h)).done(k).fail(l):k(h);return a};g.race=function(b){if(!b.length)return g.resolve(null);var a=new g,d=b.length,c,e;for(c=0;c<d&&(e=b[c],e instanceof g?e.done(a.resolve,a).fail(a.reject,a):p(e)||n(e)?(new g(e)).done(a.resolve,a).fail(a.reject,a):a.resolve(e),a.isPending());c++);return a};g.waterfall=function(b){if(!b.length)return g.resolve(null);for(var a=b.shift(),a=n(a)?g.fcall(a):
g.resolve(d),d;d=b.shift();)p(d)?a=a.then(function(a){return function(){return a}}(d)):n(d)?a=a.then(d):a.resolve(d);return a};g.counter=function(b){var a=new g;a.countdown=function(){b--;0==b&&a.resolve()};return a};return g}(),M=function(c,e){var f;if(f=e)f=!(e&&H("(?:^|\\s)"+e+"(?!\\S)").test(c.className));f&&(c.className+=" "+e)},F=function(c){return"string"==typeof c||0===B(c)},u=function(c){var e,f=c?"pageYOffset":"pageXOffset",k=c?"scrollTop":"scrollLeft";c=document;var h=c.body,l=c.documentElement;
e=void 0!==window[f]?function(){return window[f]}:l.clientHeight?function(){return l[k]}:function(){return h[k]};return function(c){return c&&1==c.nodeType&&c!==h&&c!==l?c[k]:e()}};u(!0);u(!1);var S=function(c,e,f){return c&&c.getAttribute?void 0===f?c.getAttribute(e):null===f?c.removeAttribute(e):c.setAttribute(e,f):null},v=function(){var c,e;if("undefined"!=typeof window){var f=window;c=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame;e=f.cancelAnimationFrame||
f.webkitCancelAnimationFrame||f.mozCancelAnimationFrame||f.webkitCancelRequestAnimationFrame;if(c)return function(f){var h=c(f);return function(){e(h)}}}return function(c){var e=setTimeout(c,0);return function(){clearTimeout(e)}}}(),u=function(){var c={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},e=0,f=A(),k=!!f,h=function(b,a,d){var c=function(){(new Date).getTime()-a>=d?b():v(c)};v(c)},l=function a(d,c,e,f,g,k,n,m){var p=function(){var a=s(d,"mjsAnimationQueue");
return a&&a.length&&a[0].id==n?!1:(g.reject(d),!0)},t=function(){if(!p()){var f=e;e++;if(e==c.length){g.resolve(d);s(d,"mjsAnimationQueue").shift();var h=s(d,"mjsAnimationQueue");h.length?(h=h[0],l(h.el,h.stages,0,h.start,h.deferred,!1,h.id,h.step)):s(d,"mjsAnimationQueue",null)}else s(d,"mjsAnimationQueue")[0].position=e,a(d,c,e,null,g,!1,n,m);z(d,c[f]);z(d,c[f]+"-active")}},q=function(){p()||(M(d,c[e]+"-active"),E.resolve(m&&m(d,e,"active")).done(function(){if(!p()){var a=N(d);a?h(t,(new Date).getTime(),
a):v(t)}}))},x=function(){p()||(M(d,c[e]),E.waterfall([m&&m(d,e,"start"),function(){return f?f(d):null}]).done(function(){!p()&&v(q)}))};k?v(x):x()},g=function(a,d,f,g,h,m){var r=new E,v=s(a,"mjsAnimationQueue")||[],y=++e,z=S(a,"mjs-animate"),t,q,x,u,w,A,G;d=d||z;g&&null===z&&(d=null);if(d){F(d)?"["==d.substr(0,1)?t=(new Function("","return "+d))():(t=c[d],d=h&&h.get("animate."+d,!0)):n(d)?q=d:"object"==typeof d&&5===B(d)&&(F(d[0])?t=d:(x=d[0],u=d[1]));D(d)&&(t=d.stages,q=d.fn,x=d.before,u=d.after,
w=d.options?K({},d.options):{},A=d.context||null,G=d.duration||null,f=f||w.start);if(k&&t)return v.push({el:a,stages:t,start:f,step:m,deferred:r,position:0,id:y}),s(a,"mjsAnimationQueue",v),1==v.length&&l(a,t,0,f,r,!0,y,m),r;w=w||{};f&&(w.start=function(){f(a)});w.complete=function(){r.resolve(a)};G&&(w.duration=G);if(q&&n(q))return x&&K(a.style,x,!0,!1),f&&f(a),s(a,"mjsAnimationQueue",q.call(A,a,function(){r.resolve(a)})),r;if(window.jQuery){d=$(a);x&&d.css(x);s(a,"mjsAnimationQueue","stop");if(q&&
F(q))return d[q](w),r;if(u)return d.animate(u,w),r}}f?(q=f(a),p(q)?q.done(function(){r.resolve(a)}):r.resolve(a)):r.resolve(a);return r};g.addAnimationType=function(a,d){c[a]=d};g.stop=I;g.prefixes=f;g.cssAnimations=k;return g}();y.animate=u;y.stopAnimation=I;"undefined"!=typeof global?global.MetaphorJs=y:window.MetaphorJs=y})();
